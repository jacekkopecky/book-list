(()=>{let e=[],t="";e=["/index.html","/manifest.webmanifest","/img/icon.svg","/index.d539dbac.css","/index.3a8e7baf.js","/404.html"],t="dd08ddaa";var a={};a=Object.freeze({auth0:Object.freeze({clientId:"N9qSgGHtOj1eLg5fDwiaeO9yu9NEJjQq",domain:"dev-bl7cntsbvqqv2sju.uk.auth0.com",audience:"https://books.jacek.cz/api-v2",tokenSigningAlg:"RS256"}),serverURL:"https://europe-west2-book-list-309615.cloudfunctions.net/bookListAPIv2/api/",serverURL2:"http://localhost:8082/api/",website:"https://books.jacek.cz/"});let i=t;async function s(){console.log({version:t});let a=[...e,"/version.txt"];for(let e of a)console.log("adding cache",e);let s=await caches.open(i);await s.addAll(a)}async function n(){let e=await caches.keys();await Promise.all(e.map(e=>e!==i?(console.log("deleting cache for version",e),caches.delete(e)):void 0))}async function c(e){if("GET"===e.method){var t;if(e.url.startsWith(((t=a)&&t.__esModule?t.default:t).serverURL))try{let t=await fetch(e),a=await caches.open(i);return await a.put(e,t.clone()),t}catch(a){let t=await caches.match(e.url);if(t)return t;throw a}let s=await caches.match(e);if(s)return s;if(e.url.startsWith(self.location.origin)){let e=await caches.match(new URL("/index.html",self.location.origin));if(e)return e}}return fetch(e)}self.addEventListener("install",e=>e.waitUntil(s())),self.addEventListener("activate",e=>e.waitUntil(n())),self.addEventListener("fetch",e=>{e.respondWith(c(e.request))}),self.addEventListener("push",e=>e.waitUntil(self.registration.showNotification("Bananas for Books",{body:"Your books have been updated, please refresh"})))})();
//# sourceMappingURL=service-worker.js.map
